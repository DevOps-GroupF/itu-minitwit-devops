@page "/{username}/{handler?}"
@model UserTimelineModel
@inject IHttpContextAccessor httpContextAccessor
@{
    ViewData["Title"] = "Home page";
}

@if(httpContextAccessor.HttpContext.Session.GetString(Security.Authentication.AuthUsername) != null) 
    {
        <div class="followstatus">
            
            @if((int)ViewData["timelineof"] == (int)ViewData["user"]){
              <div>This is you!</div>
            }
            else if((bool)ViewData["followed"]){
                <div>You are currently following this user.</div>
                <a class="unfollow" asp-page-handler="unfollow">Unfollow user</a>
            }
            else {
                <div>You are not yet following this user.</div>
                @*<button type="submit" asp-page="@Model.Username/follow">Follow User</button>*@
                <a class="follow" asp-page-handler="follow">Follow user</a>
            }
        </div>
    }

@await Component.InvokeAsync("Messages", ViewData["twits"])
